parameters:
  variables: {}

jobs:
  - job: External_API

    pool:
      vmImage: ubuntu-latest

    variables: ${{ parameters.variables }}

    steps:
      - template: ../steps/init-node.yml

      - script: npx ava ./test/netlify-api.ts
        displayName: Run external API test
        env: NETLIFY_API_ACCESS_TOKEN=$(NETLIFY_API_ACCESS_TOKEN)
        timeoutInMinutes: 5

    cancelTimeoutInMinutes: 1
